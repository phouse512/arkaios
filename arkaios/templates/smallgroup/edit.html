{% extends 'fgleaderbase.html' %}

{% block title %}
Add Family Group Attendance
{% endblock title %}

{% block resources %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/animate.css') }}">
<script src="{{ url_for('static', filename='js/list.min.js') }}"></script>
{% endblock resources %}

{% block active_nav_fgmanage %}
active
{% endblock active_nav_fgmanage %}

{% block content %}

<div class="row">
	<div id="fgListMembers" class="fgPanel col-lg-4 col-md-4 col-lg-offset-2 col-md-offset-2">
		<h4>Select attendees at this week's large group!</h4>
		<ul class="list-group">
			{% for user in records %}
				<a id="inFG_{{ user.attendee.id }}" class="list-group-item {% if existing[loop.index0] == 1 %}active{% endif %}" href="#">
					<h4 class="list-group-item-heading">{{ user.attendee.first_name ~ " " ~ user.attendee.last_name }}</h4>
				</a>
			{% endfor %}
			<div id="submitOptions" class="row">
				<div class="col-lg-4 col-md-4">
					<button id="add" class="btn btn-block btn-primary"><h4><i id="addIcon" class="fa fa-plus"></i></h4></button>
				</div>
				<div class="col-lg-8 col-md-8">
					<button id="submitFG" class="btn btn-block btn-primary"><h4>Submit</h4></button>
				</div>
			</div>
		</ul>
	</div>
	<div id="suggestFGMembers" class="fgPanel hidden col-lg-4 col-md-4">
		<input class="search" type="text" placeholder="type here" />
		<div id="suggestionsFGList">
			<ul class="list list-group"></ul>
		</div>
	</div>
</div>
<script type="text/javascript">
	$(document).ready(function() {
		fgLeaderShowSidebarListener();

		$.getJSON($SCRIPT_ROOT + "/family-group/_get_users", function(data){
			var values = [];
			for(var i=0; i < data.attendees.length; i++) {
				values.push(data.attendees[i]);
			}

			var hackerList = new List('suggestFGMembers', optionsListJs, values);

			$("#suggestionsFGList li").on('click', function(){
				var test = "inFG_" + $(this).children("input").text();
				if($("#" + test).length == 0) {
					var htmlToInsert = 	"<a id='" + test + "' class='list-group-item' href='#'><h4 class='list-group-item-heading'>" + $(this).children("h4").text() + "</h4></a>";
					$("#fgListMembers ul").append(htmlToInsert);
					$("#fgListMembers a").off('click').on('click', function(){
						classToggle(this, 'active');
					});

				}
			});
		});

		$("#fgListMembers a").on('click', function(){
			classToggle(this, 'active');
		});


	});
</script>
{% endblock content %}